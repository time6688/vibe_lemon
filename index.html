<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SWAG Vibe Lemon æŸ¥è©¢</title>
    <style>
        body { background-color: #0f0f0f; color: white; font-family: 'Arial', sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .card { background: linear-gradient(145deg, #1e1e1e, #2a2a2a); padding: 40px; border-radius: 20px; text-align: center; border: 2px solid #fcd34d; box-shadow: 0 0 30px rgba(253, 211, 77, 0.2); max-width: 300px; width: 80%; }
        h1 { color: #fcd34d; margin-bottom: 5px; }
        .data-box { background: #333; margin: 15px 0; padding: 10px; border-radius: 10px; }
        .label { color: #aaa; font-size: 0.8em; }
        .value { font-size: 1.5em; font-weight: bold; }
        #loading { color: #fcd34d; }
        #content { display: none; }
    </style>
</head>
<body>

    <div class="card">
        <span style="font-size:40px">ğŸ‹</span>
        
        <div id="loading">è³‡æ–™è®€å–ä¸­...</div>

        <div id="content">
            <h1 id="user-msg">æœƒå“¡è³‡æ–™</h1>
            <div class="data-box">
                <div class="label">ç›®å‰ç­‰ç´š (Level)</div>
                <div class="value" id="user-level">-</div>
            </div>
            <div class="data-box">
                <div class="label">ç´¯ç©é»æ•¸ (Points)</div>
                <div class="value" id="user-points">-</div>
            </div>
        </div>
    </div>

    <script>
        // ==========================================
        // â–¼â–¼ è«‹æŠŠä¸‹é¢é€™è¡Œç¶²å€æ›æˆä½ å‰›å‰›è¤‡è£½çš„ GAS ç¶²å€ â–¼â–¼
        const GAS_API_URL = "https://script.google.com/macros/s/AKfycbyRYE2t2G4loaYhJH2GCJeJqVs6sHhlmDUXsRwwQ488sPeEA_dxNAHe0qfRjEHWP-Dg/exec"; 
        // ==========================================

        // 1. æŠ“å–ç¶²å€ä¸Šçš„ user_id (ä¾‹å¦‚ ?user_id=123)
        const urlParams = new URLSearchParams(window.location.search);
        const userId = urlParams.get('user_id');

        if (!userId) {
            document.getElementById('loading').innerText = "è«‹åœ¨ç¶²å€å¾Œæ–¹è¼¸å…¥ ?user_id=123";
        } else {
            // 2. å‘¼å« GAS API
            fetch(`${GAS_API_URL}?user_id=${userId}`)
                .then(response => response.json())
                .then(data => {
                    // 3. æŠŠè³‡æ–™å¡«å…¥ç¶²é 
                    document.getElementById('user-msg').innerText = data.message;
                    document.getElementById('user-level').innerText = data.level;
                    document.getElementById('user-points').innerText = data.points;
                    
                    // åˆ‡æ›é¡¯ç¤ºç‹€æ…‹
                    document.getElementById('loading').style.display = 'none';
                    document.getElementById('content').style.display = 'block';
                })
                .catch(error => {
                    document.getElementById('loading').innerText = "è®€å–å¤±æ•—ï¼Œè«‹æª¢æŸ¥ GAS æ¬Šé™";
                    console.error('Error:', error);
                });
        }
    </script>

</body>
</html>
